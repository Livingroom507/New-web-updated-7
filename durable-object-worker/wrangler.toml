name = "livingroom507-collab-do" # This is the scriptName you will use in the --do flag
main = "index.js" # This is where the DO class must be imported/exported
compatibility_date = "2024-05-14"

# Environment variables for the Worker
[vars]
ADMIN_API_KEY = "j45c22b1a76b8496250912e861022d02312efdb-ba8a60cd-9" # IMPORTANT: Replace with a strong, unique key!

# ðŸ‘‡ ADD THIS SECTION ðŸ‘‡
[[d1_databases]]
binding = "DB"
database_name = "YOUR_DATABASE_NAME" # Must match the actual name of your D1 instance
database_id = "YOUR_DATABASE_ID" # Use the ID from your Cloudflare dashboard

# -----------------
# 1. Durable Object Binding & Class Export
# -----------------
[[durable_objects.bindings]]
name = "COLLAB_ROOM" # This is the name used in your function (env.COLLAB_ROOM)
class_name = "CollaborationRoom" 
script_name = "livingroom507-collab-do" # <--- **THIS IS THE CRITICAL LINE**
# -----------------
# 2. Migrations (Required for deployment, though not for local dev)
# -----------------
[[migrations]]
tag = "v1-collab-setup"
new_classes = ["CollaborationRoom"]